(this["webpackJsonpwater-bill-mgmt-w-sms"]=this["webpackJsonpwater-bill-mgmt-w-sms"]||[]).push([[0],{28:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),l=c.n(s),n=c(21),r=c.n(n),i=(c(28),c(5)),o=c(4),d=c(3),b=c(15);function j(e){var t=e.children,c=Object(b.a)(e,["children"]),s=!!localStorage.getItem("token");return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(o.b,Object(d.a)(Object(d.a)({},c),{},{render:function(e){var c=e.location;return s?t:Object(a.jsx)(o.a,{to:{pathname:"/login",state:{from:c}}})}}))})}c(34);var u=c(2),m=function(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),c=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(c)},h=function(){var e=Object(o.g)(),t=Object(s.useRef)(!0),c=Object(s.useRef)(!0),l=Object(s.useState)(""),n=Object(u.a)(l,2),r=n[0],i=n[1],d=Object(s.useState)(""),b=Object(u.a)(d,2),j=b[0],h=b[1],O=Object(s.useState)(!1),x=Object(u.a)(O,2),p=x[0],N=x[1],f=function(){N(!0);var a={username:r,password:j};fetch("https://sp1-blue-sparrow.herokuapp.com/auth/admin/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.text()})).then((function(a){console.log(a),"Invalid Username"===a||"Incorrect Password"===a||"Login Invalid"===a?(alert(a),N(!1),t.current.value="",c.current.value=""):(localStorage.setItem("token",a),localStorage.setItem("role",m(a).role),e.push("/"))})).catch((function(e){console.log(e),alert("Something went wrong..."),N(!1)}))};return Object(a.jsxs)("div",{className:"",children:[Object(a.jsxs)("div",{className:"col-12 mb-4",children:[Object(a.jsx)("label",{htmlFor:"usernameInput",className:"form-label",children:"Username"}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"usernameInput",placeholder:"Username",ref:t,onChange:function(e){i(e.target.value.trim())},disabled:p})]}),Object(a.jsxs)("div",{className:"col-12 mb-4",children:[Object(a.jsx)("label",{htmlFor:"adminPwInput",className:"form-label",children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",id:"adminPwInput",placeholder:"Password",ref:c,onChange:function(e){h(e.target.value.trim())},disabled:p})]}),Object(a.jsx)("div",{className:"col-12 mb-3 pt-2",children:p?Object(a.jsxs)("button",{type:"button",className:"btn btn-primary w-100",disabled:p,children:[Object(a.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}):Object(a.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:f,children:Object(a.jsx)("span",{children:"Login"})})})]})},O=Object(s.createContext)(),x=function(e){var t=e.children,c=Object(s.useState)(!0),l=Object(u.a)(c,2),n=l[0],r=l[1];return Object(a.jsx)(O.Provider,{value:{activeUser:n,setActiveUser:r},children:t})},p=function(){var e=Object(o.g)(),t=Object(s.useRef)(!0),c=Object(s.useRef)(!0),l=Object(s.useState)(""),n=Object(u.a)(l,2),r=n[0],i=n[1],d=Object(s.useState)(""),b=Object(u.a)(d,2),j=b[0],h=b[1],x=Object(s.useContext)(O).setActiveUser,p=Object(s.useState)(!1),N=Object(u.a)(p,2),f=N[0],v=N[1],g=function(){v(!0);var a={username:r,password:j};fetch("https://sp1-blue-sparrow.herokuapp.com/auth/customer/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.text()})).then((function(a){console.log(a),"Invalid Username"===a||"Incorrect Password"===a||"Login Invalid"===a?(alert(a),v(!1),t.current.value="",c.current.value=""):(localStorage.setItem("token",a),localStorage.setItem("role",m(a).role),x(m(a).account),e.push("/"))})).catch((function(e){console.log(e),alert("Something went wrong..."),v(!1)}))};return Object(a.jsxs)("div",{className:"",children:[Object(a.jsxs)("div",{className:"col-12 mb-4",children:[Object(a.jsx)("label",{htmlFor:"accountNumberInput",className:"form-label",children:"Account No."}),Object(a.jsx)("input",{type:"text",className:"form-control",id:"accountNumberInput",placeholder:"Account No.",ref:t,onChange:function(e){i(e.target.value.trim())}})]}),Object(a.jsxs)("div",{className:"col-12 mb-4",children:[Object(a.jsx)("label",{htmlFor:"customerPwInput",className:"form-label",children:"Password"}),Object(a.jsx)("input",{type:"password",className:"form-control",id:"customerPwInput",placeholder:"Password",ref:c,onChange:function(e){h(e.target.value.trim())}})]}),Object(a.jsx)("div",{className:"col-12 mb-3 pt-2",children:f?Object(a.jsxs)("button",{type:"button",className:"btn btn-primary w-100",disabled:f,children:[Object(a.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}):Object(a.jsx)("button",{type:"button",className:"btn btn-primary w-100",onClick:g,children:Object(a.jsx)("span",{children:"Login"})})})]})},N=c.p+"static/media/alcantara-seal.a1037ced.png",f=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container sign-in-wrapper d-flex align-items-center  justify-content-center",children:[Object(a.jsxs)("div",{className:"col-12 col-md-6 ",children:[Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("img",{src:N,alt:"Alcantara, Romblon - Municipal Seal",className:"img-thumbnail border-0",style:{height:"12rem",width:"12rem"}})}),Object(a.jsx)("p",{className:"display-6 text-center",children:"Municipality of Alcantara"}),Object(a.jsx)("p",{className:"h3 text-center",children:"Water Supply System"})]}),Object(a.jsxs)("div",{className:"col-12 col-md-6",children:[Object(a.jsx)("p",{className:"mr-auto h4",children:"Login As:"}),Object(a.jsxs)("ul",{className:"nav nav-tabs pt-1",id:"myTab",role:"tablist",children:[Object(a.jsx)("li",{className:"nav-item",role:"presentation",children:Object(a.jsx)("a",{className:"nav-link active",id:"home-tab","data-toggle":"tab",href:"#admin",role:"tab","aria-controls":"admin","aria-selected":"true",children:"Admin"})}),Object(a.jsx)("li",{className:"nav-item",role:"presentation",children:Object(a.jsx)("a",{className:"nav-link",id:"customer-tab","data-toggle":"tab",href:"#customer",role:"tab","aria-controls":"customer","aria-selected":"false",children:"Customer"})})]}),Object(a.jsxs)("div",{className:"tab-content col-12 flex-column p-3 border border-1",id:"myTabContent",children:[Object(a.jsx)("div",{className:"tab-pane fade show active",id:"admin",role:"tabpanel","aria-labelledby":"admin-tab",children:Object(a.jsx)(h,{})}),Object(a.jsx)("div",{className:"tab-pane fade",id:"customer",role:"tabpanel","aria-labelledby":"customer-tab",children:Object(a.jsx)(p,{})})]})]})]})})},v=(c(35),function(){var e,t=Object(o.g)(),c=localStorage.getItem("role"),s=[{name:"Home",to:{pathname:"/admin",state:{from:t.location}}},{name:"Accounts",subMenu:[{name:"View Accounts",to:{pathname:"/admin/accounts",state:{from:t.location}}},{name:"Register Account",to:{pathname:"/admin/accounts/new",state:{from:t.location}}}]},{name:"Statements",to:{pathname:"/admin/statements",state:{from:t.location}}}],l={pathname:"/customer",state:{from:t.location}},n={pathname:"/customer/bills",state:{from:t.location}};return Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top bg-light",children:Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)("span",{className:"mr-1 navbar-brand",children:"Water"}),Object(a.jsx)("span",{className:"mr-1 navbar-brand",children:"Supply"}),Object(a.jsx)("span",{className:"mr-1 navbar-brand",children:"System"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),(e=c,"admin"===e?Object(a.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:[Object(a.jsx)("div",{className:"navbar-nav d-flex w-75",children:s.map((function(e){return"Accounts"===e.name?Object(a.jsxs)("div",{className:"nav-item dropdown",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-link nav-link dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false",children:e.name}),Object(a.jsx)("div",{className:"dropdown-menu",children:e.subMenu.map((function(e){return Object(a.jsx)(i.b,{className:"nav-link dropdown-item",activeClassName:"active",exact:!0,to:e.to,children:e.name},e.name)}))})]},e.name):Object(a.jsx)(i.b,{className:"nav-link mx-2",activeClassName:"active",exact:!0,to:e.to,children:e.name},e.name)}))}),Object(a.jsx)("div",{className:"d-flex w-100 w-md-75 justify-content-md-end justify-content-center",children:Object(a.jsx)("button",{type:"button",className:"btn btn-link sign-out-btn",onClick:function(){t.push("/login"),localStorage.clear()},children:"Sign Out"})})]}):Object(a.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:[Object(a.jsxs)("div",{className:"navbar-nav d-flex w-25 justify-content-around",children:[Object(a.jsx)(i.b,{className:"nav-link",activeClassName:"active",exact:!0,to:l,children:"Account"}),Object(a.jsx)(i.b,{className:"nav-link",activeClassName:"active",to:n,children:"Bills"})]}),Object(a.jsx)("div",{className:"d-flex w-100 w-md-75 justify-content-md-end justify-content-center",children:Object(a.jsx)("button",{type:"button",className:"btn btn-link sign-out-btn",onClick:function(){t.push("/login"),localStorage.clear()},children:"Sign Out"})})]}))]})})}),g=Object(s.createContext)(),y=function(e){var t=e.children,c=Object(s.useState)(),l=Object(u.a)(c,2),n=l[0],r=l[1];return Object(a.jsx)(g.Provider,{value:{data:n,setData:r},children:t})},w=Object(s.createContext)(),S=function(e){var t=e.children,c=Object(s.useContext)(g),l=Object(s.useState)(c[0]),n=Object(u.a)(l,2),r=n[0],i=n[1];return Object(a.jsx)(w.Provider,{value:{billOnDisplay:r,setBillOnDisplay:i},children:t})},A=(c(36),function(e){var t=e.bill,c=new Date(t.periodFrom).toDateString().substring(4,10),s=new Date(t.periodTo).toDateString().substring(4,10),l=Object(o.g)();return Object(a.jsx)("div",{className:"container bill-card-wrapper",children:Object(a.jsx)("div",{className:"row pt-3",children:Object(a.jsx)("div",{className:"col-12 col-md-10 mx-auto",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsxs)("div",{className:"row py-2",children:[Object(a.jsx)("div",{className:"col-12 col-md-2",children:Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"h5",children:"Bill No."}),Object(a.jsxs)("p",{className:"h5 font-weight-normal",children:[" ","".concat(t.billNumber)," "]})]})}),Object(a.jsx)("div",{className:"col-12 col-md-5 ml-auto",children:Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"h5",children:"Period Covered:"}),Object(a.jsx)("p",{className:"h5 font-weight-light",children:"".concat(c," - ").concat(s)})]})})]})}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"row g-2",children:Object(a.jsxs)("div",{className:"col-6 p-2 m-auto",children:[Object(a.jsx)("p",{className:"h5 text-center",children:"Meter Reading"}),Object(a.jsxs)("div",{className:"d-flex justify-content-between my-0 py-0",children:[Object(a.jsx)("p",{className:"font-weight-bold my-0 py-0",children:"Present: "}),Object(a.jsxs)("p",{className:"my-0 py-0",children:[" ",t.readingPresent," "]})]}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"font-weight-bold my-0 py-0",children:"Previous: "}),Object(a.jsxs)("p",{className:"my-0 py-0",children:[" ",t.readingPrevious," "]})]}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"font-weight-bold my-0 py-0",children:"Used in Cu. Meters: "}),Object(a.jsxs)("p",{className:"my-0 py-0",children:[" ",t.cumUsed," "]})]})]})}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row g-2",children:[Object(a.jsx)("p",{className:"h5 text-center",children:"Consumption"}),Object(a.jsxs)("div",{className:"col-8 m-auto",children:[Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"font-weight-bold",children:"Charges"}),Object(a.jsx)("p",{className:"font-weight-bold",children:"Rates"})]}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"h6",children:"0 - 10 CU.M: "}),Object(a.jsx)("p",{className:"",children:"PHP 50.00"})]}),Object(a.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"h6",children:"Above 10 CU.M: "}),Object(a.jsx)("p",{className:"",children:"PHP 11.00 / CU.M"})]}),Object(a.jsx)("div",{className:"d-flex justify-content-start",children:Object(a.jsx)("p",{className:"h6",children:"Others: "})})]}),Object(a.jsxs)("div",{className:"col-4 m-auto",children:[Object(a.jsx)("p",{className:"font-weight-bold text-right",children:"Amount"}),Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)("p",{className:"",children:"50.00"})}),Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)("p",{className:"",children:"".concat(t.chargePerAboveTen,".00")})}),Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)("p",{className:"",children:"0.00"})})]})]}),Object(a.jsx)("hr",{className:"my-1"}),Object(a.jsx)("div",{className:"row g-1",children:Object(a.jsxs)("div",{className:"col-6 ml-auto d-flex justify-content-between",children:[Object(a.jsx)("p",{className:"h5",children:"Total Amount"}),Object(a.jsx)("p",{className:"h5",children:"PHP ".concat(t.totalAmountDue,".00")})]})})]}),Object(a.jsx)("div",{className:"card-footer",children:Object(a.jsx)("div",{className:"d-flex w-100 justify-content-end",children:Object(a.jsx)("button",{className:"btn btn-outline-primary btn-lg px-4",type:"button",onClick:function(){l.goBack()},children:"Go Back"})})})]})})})})}),C=function(e){var t=e.bills,c=e.viewBill,l=31556952e3,n=Object(s.useState)(1577808e6),r=Object(u.a)(n,2),i=r[0],o=r[1],d=Object(s.useState)(t.sort((function(e,t){return t.billNumber-e.billNumber})).filter((function(e){return e.periodTo-i<l}))),b=Object(u.a)(d,2),j=b[0],m=b[1];return Object(s.useEffect)((function(){m(t.sort((function(e,t){return t.billNumber-e.billNumber})).filter((function(e){return e.periodTo-i<l})))}),[t,i,l]),Object(a.jsxs)("table",{className:"table table-hover table-striped text-center",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Bill No."}),Object(a.jsx)("th",{scope:"col",children:"Period Covered"}),Object(a.jsx)("th",{scope:"col",children:"Consumption"}),Object(a.jsx)("th",{scope:"col",children:"Amount"}),Object(a.jsx)("th",{scope:"col",children:Object(a.jsx)("select",{className:"form-select","aria-label":".form-select-lg example",onChange:function(e){o(e.target.value)},children:[{name:"2020",value:1577808e6},{name:"2019",value:1546272e6}].map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.name},e.name)}))})})]})}),Object(a.jsx)("tbody",{children:0!==j.length?j.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e.billNumber}),Object(a.jsx)("td",{children:"".concat(new Date(e.periodFrom).toDateString().substring(4,7),". ").concat(new Date(e.periodFrom).toDateString().substring(8,10)," - \n                  ").concat(new Date(e.periodTo).toDateString().substring(4,7),". ").concat(new Date(e.periodTo).toDateString().substring(8,10))}),Object(a.jsx)("td",{children:"".concat(e.cumUsed," Cu. Meters")}),Object(a.jsx)("td",{children:"PHP ".concat(e.totalAmountDue,".00")}),Object(a.jsx)("td",{className:"d-flex justify-content-around",children:Object(a.jsx)("button",{type:"button",className:"btn btn-sm btn-primary",onClick:function(e){c(e.target.value)},value:e.billNumber,children:"View Details"})})]},e.billNumber)})):Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:5,className:"py-4",children:Object(a.jsxs)("em",{children:["No Available Records for ",new Date(i).toDateString()]})})})})]})};function k(){return Object(a.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-center",style:{height:"50vh"},children:[Object(a.jsx)("div",{className:"spinner-grow mx-2",style:{width:"2.2rem",height:"2.2rem",animationDelay:"0.08s"},role:"status",children:Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(a.jsx)("div",{className:"spinner-grow mx-3",style:{width:"3rem",height:"3rem",animationDelay:"0.16s"},role:"status",children:Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(a.jsx)("div",{className:"spinner-grow mx-2",style:{width:"2.2rem",height:"2.2rem",animationDelay:"0.24s"},role:"status",children:Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})}var P=function(e){var t=e.endpoint,c=e.token,a=Object(s.useState)({data:null,loading:!0}),l=Object(u.a)(a,2),n=l[0],r=l[1],i=Object(s.useRef)(null);return Object(s.useEffect)((function(){i.current=new AbortController})),Object(s.useEffect)((function(){var e=i.current.signal;return r({data:null,loading:!0}),fetch("https://sp1-blue-sparrow.herokuapp.com/api/v1"+t,{method:"GET",headers:{"x-auth-token":c},signal:e}).then((function(e){return e.text()})).then((function(e){r({data:JSON.parse(e),loading:!1})})).catch((function(e){alert(e)})),function(){return i.current.abort()}}),[t,c]),n},B=function(){var e,t,c=localStorage.getItem("token"),l=m(c).account.accountNumber,n="/bill-management/bills/".concat(l),r=P({endpoint:n,token:c}).data,i=Object(o.g)(),d=Object(s.useContext)(w).setBillOnDisplay;return Object(a.jsxs)("div",{className:"container pt-2",children:[Object(a.jsx)("p",{className:"display-5 text-center py-3",children:"My Bills"}),Object(a.jsx)("div",{className:"row pt-2",children:Object(a.jsx)("div",{className:"col-12 col-md-10 m-auto",children:(e=r,t=function(e){var t=r.find((function(t){return t.billNumber===parseInt(e)}));d(t),i.push({pathname:"/customer/bills/".concat(e),state:{from:i.location}})},e?Object(a.jsx)(C,{bills:e,viewBill:t}):Object(a.jsx)(k,{}))})})]})},M=function(){var e=Object(o.h)().path,t=Object(s.useContext)(w).billOnDisplay;return Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:e,children:Object(a.jsx)(B,{})}),Object(a.jsx)(o.b,{path:"".concat(e,"/:billNo"),children:Object(a.jsx)(A,{bill:t})})]})},T=function(e){var t=e.consumption,c=Object(s.useState)({}),a=Object(u.a)(c,2),l=a[0],n=a[1];return Object(s.useEffect)((function(){var e=t-10,c=e>0?11*e:0;n({chargeTenBelow:50,chargeAboveTen:c,total:50+c})}),[t]),l},I=(c(37),function(){var e,t=localStorage.getItem("token"),c=m(t).account.accountNumber,s="/account-management/accounts/".concat(c,"/account"),l=Object(o.g)(),n=P({endpoint:s,token:t}).data,r=T({consumption:null===n||void 0===n?void 0:n.lastBillReading}).total,i=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(a.jsxs)("div",{className:"container customer-page-wrapper",children:[Object(a.jsxs)("div",{className:"row pt-3",children:[Object(a.jsx)("div",{className:"col-12 col-md-8",children:Object(a.jsx)("p",{className:"display-5",children:"My Account"})}),Object(a.jsx)("div",{className:"col-12 col-md-4 d-flex align-items-center justify-content-end",children:Object(a.jsxs)("p",{className:"h5",children:["Account No.: ",Object(a.jsx)("span",{className:"font-weight-lighter",children:c})]})})]}),(e=n,e?Object(a.jsxs)("dl",{className:"row pt-4",children:[Object(a.jsx)("dt",{className:"col-sm-3 h5",children:"Name"}),Object(a.jsx)("dd",{className:"col-sm-9",children:n.fullName}),Object(a.jsx)("dt",{className:"col-sm-3 h5",children:"Address"}),Object(a.jsx)("dd",{className:"col-sm-9",children:n.address?n.address:"No Address"}),Object(a.jsx)("dt",{className:"col-sm-3 h5",children:"Mobile No."}),Object(a.jsx)("dd",{className:"col-sm-9",children:void 0===n.mobileNumber?"No Mobile Number":"".concat(n.mobileNumber.substring(0,3)," ").concat(n.mobileNumber.substring(3,6),"-").concat(n.mobileNumber.substring(6,9),"-").concat(n.mobileNumber.substring(9))}),Object(a.jsx)("dt",{className:"col-sm-3 h5",children:"Meter Serial No."}),Object(a.jsx)("dd",{className:"col-sm-9",children:n.meterSerialNumber?n.meterSerialNumber:"NO METER SERIAL NO."}),Object(a.jsx)("hr",{className:"my-4"}),Object(a.jsx)("dt",{className:"col-12 pb-2 h5",children:"Most Recent Bill Details"}),Object(a.jsx)("dt",{className:"col-sm-3",children:"Month Covered"}),Object(a.jsx)("dd",{className:"col-sm-9",children:0===n.lastBillPeriodTo?"-":"".concat(i[new Date(n.lastBillPeriodTo).getMonth()-1],"-").concat(i[new Date(n.lastBillPeriodTo).getMonth()])}),Object(a.jsx)("dt",{className:"col-sm-3",children:"Meter Reading"}),Object(a.jsx)("dd",{className:"col-sm-9",children:0===n.lastBillReading?"-":"".concat(n.lastBillReading," Cu. Meters")}),Object(a.jsx)("dt",{className:"col-sm-3",children:"Amount Due"}),Object(a.jsx)("dd",{className:"col-sm-9",children:"Php ".concat(r,".00")}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-success btn-lg w-25 mt-3",type:"button",onClick:function(){l.push({pathname:"/customer/bills",state:{from:l.location}})},children:"View Bills"})})]}):Object(a.jsx)(k,{}))]})}),R=Object(s.createContext)(),D=function(e){var t=e.children,c=Object(s.useState)({}),l=Object(u.a)(c,2),n=l[0],r=l[1];return Object(a.jsx)(R.Provider,{value:{billAccount:n,setBillAccount:r},children:t})},F=(c(38),function(e){var t=e.account,c=e.setShowModal;function s(){c(!1)}var l=["January","February","March","April","May","June","July","August","September","October","November","December"],n=T(t.lastBillReading).total;return Object(a.jsx)("div",{className:"account-details-modal",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("p",{className:"modal-title h4",id:"account-details-modal",children:"Account No.: ".concat(t.accountNumber)}),Object(a.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:s})]}),Object(a.jsxs)("div",{className:"modal-body p-4",children:[Object(a.jsxs)("div",{className:"row g-4",children:[Object(a.jsx)("div",{className:"col-10 h4 font-weight-normal",children:"Account Information"}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between mr-auto",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Full Name:"}),Object(a.jsx)("span",{children:t.fullName})]}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Address: "}),Object(a.jsxs)("span",{children:[" ",t.address," "]})]}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between mr-auto",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Mobile No.: "}),Object(a.jsx)("span",{children:"".concat(t.mobileNumber.substring(0,3)," ").concat(t.mobileNumber.substring(3,6),"-").concat(t.mobileNumber.substring(6,9),"-").concat(t.mobileNumber.substring(9))})]}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Meter Serial No.: "}),Object(a.jsxs)("span",{children:[" ",t.meterSerialNumber," "]})]})]}),Object(a.jsx)("hr",{className:"my-4"}),Object(a.jsxs)("div",{className:"row g-4",children:[Object(a.jsx)("div",{className:"col-6 h5",children:"Previous Statement Summary"}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between ml-auto",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Month Covered:"}),0===t.lastBillPeriodTo?"-":"".concat(l[new Date(t.lastBillPeriodTo).getMonth()-1]," - ").concat(l[new Date(t.lastBillPeriodTo).getMonth()])]}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between mr-auto",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Amount Due: "}),Object(a.jsx)("span",{children:0===t.lastBillReading?"-":"Php ".concat(n,".00")})]}),Object(a.jsxs)("div",{className:"col-md-5 d-flex justify-content-between",children:[Object(a.jsx)("span",{className:"font-weight-bold",children:"Meter Reading: "}),Object(a.jsx)("span",{children:0===t.lastBillReading?"-":"".concat(t.lastBillReading," Cu. Meters")})]})]})]}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:s,children:"Close"})})]})})})}),E=c(7),L=function(e){var t=e.data,c=e.sortBy,a=Object(s.useState)({array:Object(E.a)(t),arrow:null}),l=Object(u.a)(a,2),n=l[0],r=l[1];return Object(s.useEffect)((function(){switch(!0){case"accountNumberDesc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.accountNumber<t.accountNumber?1:t.accountNumber<e.accountNumber?-1:0})),arrow:{accountNumber:"down"}});break;case"fullNameAsc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.fullName>t.fullName?1:t.fullName>e.fullName?-1:0})),arrow:{fullName:"up"}});break;case"fullNameDesc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.fullName<t.fullName?1:t.fullName<e.fullName?-1:0})),arrow:{fullName:"down"}});break;case"barangayAsc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.barangay>t.barangay?1:t.barangay>e.barangay?-1:0})),arrow:{barangay:"up"}});break;case"barangayDesc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.barangay<t.barangay?1:t.barangay<e.barangay?-1:0})),arrow:{barangay:"down"}});break;case"lastBillReadingAsc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.lastBillReading-t.lastBillReading})),arrow:{lastBillReading:"up"}});break;case"lastBillReadingDesc"===c:r({array:Object(E.a)(t).sort((function(e,t){return t.lastBillReading-e.lastBillReading})),arrow:{lastBillReading:"down"}});break;case"lastBillPeriodToAsc"===c:r({array:Object(E.a)(t).sort((function(e,t){return e.lastBillPeriodTo-t.lastBillPeriodTo})),arrow:{lastBillPeriodTo:"up"}});break;case"lastBillPeriodToDesc"===c:r({array:Object(E.a)(t).sort((function(e,t){return t.lastBillPeriodTo-e.lastBillPeriodTo})),arrow:{lastBillPeriodTo:"down"}});break;default:r({array:Object(E.a)(t).sort((function(e,t){return e.accountNumber>t.accountNumber?1:t.accountNumber>e.accountNumber?-1:0})),arrow:{accountNumber:"up"}})}}),[t,c]),n},J=function(){return Object(a.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-arrow-up",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"})})},V=function(){return Object(a.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-arrow-down",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"})})},U=function(e){var t=e.accounts,c=e.setShowModal,l=e.selectAccount,n=Object(s.useState)(""),r=Object(u.a)(n,2),i=r[0],o=r[1],d=L({data:t,sortBy:i}),b=d.array,j=d.arrow,m={up:Object(a.jsx)(J,{}),down:Object(a.jsx)(V,{})};return Object(a.jsxs)("table",{className:"table table-hover table-striped w-100 align-middle",children:[Object(a.jsxs)("colgroup",{children:[Object(a.jsx)("col",{style:{width:"18%"}}),Object(a.jsx)("col",{style:{width:"25%"}}),Object(a.jsx)("col",{style:{width:"15%"}}),Object(a.jsx)("col",{style:{width:"12.5%"}}),Object(a.jsx)("col",{style:{width:"12.5%"}}),Object(a.jsx)("col",{style:{width:"17%"}})]}),Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){o("accountNumberAsc"===i?"accountNumberDesc":"accountNumberAsc")},title:"Sort by Account No.",children:[Object(a.jsx)("div",{children:"Account No."}),(null===j||void 0===j?void 0:j.accountNumber)&&m[j.accountNumber]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){o("fullNameAsc"===i?"fullNameDesc":"fullNameAsc")},title:"Sort by Full Name",children:[Object(a.jsx)("div",{children:"Full Name"}),(null===j||void 0===j?void 0:j.fullName)&&m[j.fullName]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){o("barangayAsc"===i?"barangayDesc":"barangayAsc")},title:"Sort by Barangay",children:[Object(a.jsx)("div",{children:"Barangay"}),(null===j||void 0===j?void 0:j.barangay)&&m[j.barangay]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){o("lastBillReadingAsc"===i?"lastBillReadingDesc":"lastBillReadingAsc")},title:"Sort by Previous Reading",children:[Object(a.jsx)("div",{children:"Reading"}),(null===j||void 0===j?void 0:j.lastBillReading)&&m[j.lastBillReading]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){o("lastBillPeriodToAsc"===i?"lastBillPeriodToDesc":"lastBillPeriodToAsc")},title:"Sort by Month Covered of Last Bill",children:[Object(a.jsx)("div",{children:"Month"}),(null===j||void 0===j?void 0:j.lastBillPeriodTo)&&m[j.lastBillPeriodTo]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0"})]})}),Object(a.jsx)("tbody",{children:b&&b.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e.accountNumber}),Object(a.jsx)("td",{children:e.fullName}),Object(a.jsx)("td",{children:e.address.split(",")[0]}),Object(a.jsx)("td",{children:e.lastBillReading}),Object(a.jsx)("td",{children:0===e.lastBillPeriodTo?"":new Date(e.lastBillPeriodTo).toDateString().substring(4,7)}),Object(a.jsx)("td",{className:"d-flex justify-content-center",children:Object(a.jsx)("button",{type:"button",className:"btn btn-sm btn-primary px-2",onClick:function(){l(e),c(!0)},children:"View Details"})})]},e.accountNumber)}))})]})},G=function(){var e=localStorage.getItem("token"),t=P({endpoint:"/account-management/accounts",token:e}).data,c=Object(s.useState)(!1),l=Object(u.a)(c,2),n=l[0],r=l[1],i=Object(s.useState)({}),o=Object(u.a)(i,2),d=o[0],b=o[1];return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"container h-100",children:[n&&Object(a.jsx)(F,{account:d,setShowModal:r}),Object(a.jsx)("p",{className:"display-5 text-center py-3",children:"Accounts"}),t?Object(a.jsx)("div",{className:"row pt-2",children:Object(a.jsx)("div",{className:"col-12 col-md-10 m-auto",children:Object(a.jsx)(U,{accounts:t,setShowModal:r,selectAccount:b})})}):Object(a.jsx)("div",{className:"row py-4 h-50",children:Object(a.jsx)(k,{})})]})})},q=(c(39),function(e){var t=e.values,c=e.setValues,l=e.errors;var n=Object(s.useState)("form-control"),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){l.accountNumber?o("form-control is-invalid"):o("form-control")}),[l]),Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("label",{htmlFor:"accountNumberId",className:"form-label",children:"Account Number"}),Object(a.jsx)("input",{type:"text",className:i,id:"accountNumberId",placeholder:"ex. 2020-00-01",value:t.accountNumber||"",onChange:function(e){/^[0-9 -]*$/.test(e.target.value)?c(Object(d.a)(Object(d.a)({},t),{},{accountNumber:e.target.value.trim()})):e.target.value.trim()}}),Object(a.jsx)("div",{className:"invalid-feedback",children:l.accountNumber||""})]})}),H=function(e){var t=e.errors,c=Object(s.useState)("form-control"),l=Object(u.a)(c,2),n=l[0],r=l[1];return Object(s.useEffect)((function(){t.address?r("form-control is-invalid"):r("form-control")}),[t]),Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("label",{htmlFor:"addressId",className:"form-label",children:"Address"}),Object(a.jsx)("input",{type:"text",className:n,id:"addressId",value:"Alcantara, Romblon",disabled:!0}),Object(a.jsx)("div",{className:"invalid-feedback",children:t.address||""})]})},W=function(e){var t=e.values,c=e.setValues,l=e.errors;var n=Object(s.useState)("form-control"),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){l.fullName?o("form-control is-invalid"):o("form-control")}),[l]),Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("label",{htmlFor:"fullNameId",className:"form-label",children:"Full Name"}),Object(a.jsx)("input",{type:"text",className:i,id:"fullNameId",placeholder:"ex. Juan Dela Cruz",value:t.fullName||"",onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{fullName:e.target.value}))}}),Object(a.jsx)("div",{className:"invalid-feedback",children:l.fullName||""})]})},Y=function(e){var t=e.values,c=e.setValues,l=e.errors;var n=Object(s.useState)("form-control"),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){l.meterSerialNumber?o("form-control is-invalid"):o("form-control")}),[l]),Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("label",{htmlFor:"meterSerialNumberId",className:"form-label",children:"Meter Serial Number"}),Object(a.jsx)("input",{type:"text",className:i,id:"meterSerialNumberId",placeholder:"ex. EVJ 64352341",value:t.meterSerialNumber||"",onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{meterSerialNumber:e.target.value}))}}),Object(a.jsx)("div",{className:"invalid-feedback",children:l.meterSerialNumber||""})]})},z=function(e){var t=e.values,c=e.setValues,l=e.errors;var n=Object(s.useState)("form-control"),r=Object(u.a)(n,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){l.mobileNumber?o("form-control is-invalid"):o("form-control")}),[l]),Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("label",{htmlFor:"mobileNumberId",className:"form-label",children:"Mobile Number"}),Object(a.jsx)("input",{type:"text",className:i,id:"mobileNumberId",placeholder:"ex. 9179876543",value:t.mobileNumber||"",onChange:function(e){/^([+0]63)?[0-9]*$/.test(e.target.value)&&e.target.value.length<14&&e.target.value.length>=3?c(Object(d.a)(Object(d.a)({},t),{},{mobileNumber:e.target.value})):e.target.value.trim()}}),Object(a.jsx)("div",{className:"invalid-feedback",children:l.mobileNumber||""})]})},$=function(e){var t=e.values,c=e.setValues,s=[{label:"Poblacion",value:"POB"},{label:"Gui-ob",value:"GUI"},{label:"Madalag",value:"MAD"},{label:"Bagsik",value:"BAG"},{label:"Lawan",value:"LAW"},{label:"Camili",value:"CAM"}],l={POB:"Poblacion",GUI:"Gui-ob",MAD:"Madalag",BAG:"Bagsik",LAW:"Lawan",CAM:"Camili"};return Object(a.jsxs)("div",{className:"col-md-6",children:[Object(a.jsx)("label",{htmlFor:"barangayId",className:"form-label",children:"Barangay"}),Object(a.jsx)("select",{id:"barangayId",className:"form-select",defaultChecked:!0,defaultValue:s[0].value,onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{barangay:e.target.value,address:"".concat(l["".concat(e.target.value)],", Alcantara, Romblon")})),console.log(l["".concat(e.target.value)])},children:s.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.label},e.label)}))})]})},_=function(e){var t=e.values,c=e.setValues;return Object(a.jsxs)("div",{className:"col-md-12",children:[Object(a.jsx)("p",{className:"form-check-label text-center font-weight-bold",children:"Select if Account is New or Existing"}),Object(a.jsxs)("div",{className:"col-md-12 d-flex justify-content-center",children:[Object(a.jsxs)("div",{className:"form-check form-check-inline mx-5",children:[Object(a.jsx)("input",{className:"form-check-input",type:"radio",name:"newOrExistingAccountOptions",id:"newAccountId",value:!1,checked:!t.existing,onChange:function(){c(Object(d.a)(Object(d.a)({},t),{},{existing:!1,lastBillNumber:0,lastBillReading:0,lastBillPeriodTo:0}))}}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"newAccountId",children:"New"})]}),Object(a.jsxs)("div",{className:"form-check form-check-inline mx-5",children:[Object(a.jsx)("input",{className:"form-check-input",type:"radio",name:"newOrExistingAccountOptions",id:"existingAccountId",value:!0,checked:t.existing,onChange:function(){c(Object(d.a)(Object(d.a)({},t),{},{existing:!0,lastBillPeriodTo:15801408e5}))}}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"existingAccountId",children:"Existing"})]})]})]})},K=function(e){var t=e.values,c=e.setValues,l=e.errors,n=Object(s.useState)("form-control"),r=Object(u.a)(n,2),i=r[0],o=r[1],b=Object(s.useState)("form-control"),j=Object(u.a)(b,2),m=j[0],h=j[1];return Object(s.useEffect)((function(){l.lastBillNumber?o((function(e){return"form-control is-invalid"})):o((function(e){return"form-control"})),l.lastBillReading?h((function(e){return"form-control is-invalid"})):h((function(e){return"form-control"}))}),[l]),Object(a.jsxs)("div",{className:"row g-3",children:[Object(a.jsx)("p",{className:"font-weight-bold  my-0 py-0",children:"Most Recent Bill Details:"}),Object(a.jsxs)("div",{className:"col-md-3",children:[Object(a.jsx)("label",{htmlFor:"lastBillNumberId",className:"form-label",children:"Bill Number"}),Object(a.jsx)("input",{type:"number",className:i,id:"lastBillNumberId",onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{lastBillNumber:e.target.value}))}}),Object(a.jsx)("div",{className:"invalid-feedback",children:l.lastBillNumber||""})]}),Object(a.jsxs)("div",{className:"col-md-3",children:[Object(a.jsx)("label",{htmlFor:"lastBillReadingId",className:"form-label",children:"Reading"}),Object(a.jsx)("input",{type:"number",className:m,id:"lastBillReadingId",onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{lastBillReading:e.target.value}))}}),Object(a.jsx)("div",{className:"invalid-feedback",children:l.lastBillReading||""})]}),Object(a.jsxs)("div",{className:"col-md-3",children:[Object(a.jsx)("label",{htmlFor:"lastBillYearId",className:"form-label",children:"Year"}),Object(a.jsx)("select",{id:"lastBillYearId",className:"form-select",children:Object(a.jsx)("option",{value:1577808e6,defaultChecked:!0,children:"2020"})})]}),Object(a.jsxs)("div",{className:"col-md-3",children:[Object(a.jsx)("label",{htmlFor:"lastBillPeriodToId",className:"form-label",children:"Month"}),Object(a.jsx)("select",{id:"lastBillPeriodToId",className:"form-select",defaultChecked:!0,onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{lastBillPeriodTo:e.target.value}))},children:[{label:"January",value:15801408e5},{label:"February",value:15828192e5},{label:"March",value:15853248e5},{label:"April",value:15880032e5},{label:"May",value:15905952e5},{label:"June",value:15932736e5},{label:"July",value:15958656e5},{label:"August",value:1598544e6},{label:"September",value:16012224e5},{label:"October",value:16038144e5},{label:"November",value:16064928e5},{label:"December",value:16090848e5}].map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.label},e.label)}))})]})]})},Q=function(e){var t=e.values,c=e.errors,s=e.setErrors,l=e.setLoading,n=e.setShowModal,r=localStorage.getItem("token");return Object(a.jsx)("div",{className:"col-md-12 d-flex justify-content-center py-3",children:Object(a.jsx)("button",{type:"button",className:"btn btn-primary w-50",onMouseDown:function(){s(function(e){var t,c={};return e.accountNumber||(c.accountNumber="Account Number is required"),/^[0-9]{4}(-[0-9]{2})\-?[0-9]+/.test(e.accountNumber)||(c.accountNumber="Invalid format (valid ex. 2016-09-03)"),e.fullName||(c.fullName="Full Name is required"),e.mobileNumber||(c.mobileNumber="Mobile Number is required"),/^([+0]63)?[9]{1}[0-9]{9}$/.test(e.mobileNumber)||(c.mobileNumber="Invalid mobile number (valid ex. +639065338541)"),(null===(t=e.mobileNumber)||void 0===t?void 0:t.length)<13&&(c.mobileNumber="Mobile Number is too short"),e.address||(c.address="Address is required"),e.meterSerialNumber||(c.meterSerialNumber="Meter Serial Number is required"),e.existing&&(e.lastBillNumber||(c.lastBillNumber="Bill Number is required"),e.lastBillReading||(c.lastBillReading="Reading is required")),c}(t))},onMouseUp:function(e){if(Object.keys(c).length>0)return!1;console.log("SENDING"),l(!0),fetch("https://sp1-blue-sparrow.herokuapp.com/api/v1/account-management/accounts/create",{method:"POST",headers:{"Content-type":"application/json","x-auth-token":r},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){l(!1),"Success"===e?n(!0):s(Object(d.a)(Object(d.a)({},c),{},{accountNumber:"Account Number already taken"}))})).catch((function(e){console.log(e),alert("Something went wrong..."),l(!1)}))},children:"Submit"})})},X=(c(40),function(e){var t=e.setShowModal,c=e.setValues,s=Object(o.g)();function l(){c({accountNumber:"",meterSerialNumber:"",fullName:"",mobileNumber:"+63",barangay:"POB",address:"Poblacion, Alcantara, Romblon",existing:!1,lastBillNumber:0,lastBillReading:0,lastBillPeriodTo:0}),t(!1)}return Object(a.jsx)("div",{className:"success-modal",children:Object(a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Submission Successful"}),Object(a.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:l})]}),Object(a.jsxs)("div",{className:"modal-body",children:[Object(a.jsx)("p",{children:"Account has been successfully created!"}),Object(a.jsx)("p",{children:"Go to Accounts page to view the newly created account or continue and create another account."})]}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){t(!1),s.push("/admin/accounts")},children:"View Accounts"}),Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:l,children:"Continue"})]})]})})})}),Z=function(){var e=Object(s.useState)({barangay:"POB",address:"Poblacion, Alcantara, Romblon",mobileNumber:"+63",existing:!1,lastBillNumber:0,lastBillReading:0,lastBillPeriodTo:0}),t=Object(u.a)(e,2),c=t[0],l=t[1],n=Object(s.useState)({}),r=Object(u.a)(n,2),i=r[0],o=r[1],d=Object(s.useState)(!1),b=Object(u.a)(d,2),j=b[0],m=b[1],h=Object(s.useState)(!1),O=Object(u.a)(h,2),x=O[0],p=O[1];return Object(a.jsxs)("div",{className:"container col-md-8",children:[x&&Object(a.jsx)(X,{setShowModal:p,setValues:l}),Object(a.jsx)("p",{className:"display-5 text-center py-3",children:j?"Submitting Account Information":"Account Registration"}),j?Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(k,{}),Object(a.jsx)("p",{className:"display-6 text-center",children:"Please wait"})]}):Object(a.jsxs)("form",{className:"row g-3 pb-4",children:[Object(a.jsx)(_,{values:c,setValues:l}),Object(a.jsx)(q,{values:c,setValues:l,errors:i}),Object(a.jsx)(Y,{values:c,setValues:l,errors:i}),Object(a.jsx)(W,{values:c,setValues:l,errors:i}),Object(a.jsx)(z,{values:c,setValues:l,errors:i}),Object(a.jsx)($,{values:c,setValues:l}),Object(a.jsx)(H,{errors:i}),c.existing&&Object(a.jsx)(K,{values:c,setValues:l,errors:i}),Object(a.jsx)(Q,{values:c,errors:i,setErrors:o,setLoading:m,setShowModal:p})]})]})},ee=function(){var e=Object(o.h)().path;return Object(a.jsx)(D,{children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:e,children:Object(a.jsx)(G,{})}),Object(a.jsx)(o.b,{path:"".concat(e,"/new"),children:Object(a.jsx)(Z,{})})]})})},te=(c(41),function(e){var t=e.cardImg,c=e.cardTitle,s=e.cardText,l=e.buttonLabel,n=e.handleClick,r=s.split(".");return Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsxs)("div",{className:"card h-100 p-2",children:[Object(a.jsx)("img",{src:t,className:"card-img-top",alt:"...",style:{objectFit:"contain",height:"150px"}}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h5",{className:"card-title pb-2",children:c}),Object(a.jsx)("div",{className:"card-text",children:r.map((function(e,t){return Object(a.jsx)("div",{className:"pb-1",children:e},t)}))})]}),Object(a.jsx)("div",{className:"card-footer",children:Object(a.jsx)("button",{type:"button",className:"btn btn-primary w-100 my-1",onClick:n,children:l})})]})})}),ce=c.p+"static/media/register.c0fea52c.png",ae=c.p+"static/media/accounts.15c1b769.png",se=c.p+"static/media/statement.a5d35e3b.jpg",le=function(){var e=Object(s.useState)(!0),t=Object(u.a)(e,2),c=t[0],l=t[1];Object(s.useEffect)((function(){var e=setTimeout((function(){l(!1)}),1400);return function(){return clearTimeout(e)}}),[]);var n=Object(o.h)().path,r=Object(o.g)(),i=[{id:"addAccountId",cardImg:ce,cardTitle:"Create an account",cardText:"Accounts from the old system can be registered in this system. New accounts can also be registered easily. Click the button below to learn more.",buttonLabel:"Go to Registration Page",handleClick:function(){return r.push(n+"/accounts/new")}},{id:"viewAccountsId",cardImg:ae,cardTitle:"View registered accounts",cardText:"All accounts can be viewed in a table format, which also comes with sorting features. The sorting can be toggled by clicking a column header. Click the button below to see.",buttonLabel:"Go to Accounts Page",handleClick:function(){return r.push(n+"/accounts")}},{id:"issueStatementsId",cardImg:se,cardTitle:"Issue a new statement",cardText:"The system will only be needing the current meter reading. All the other values will be auto-computed and account holders will be notified through SMS.",buttonLabel:"Go to Statements Page",handleClick:function(){return r.push(n+"/statements")}}];return Object(a.jsx)("div",{className:"container",children:c?Object(a.jsx)(k,{}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"d-flex w-100 justify-content-around align-items-center my-3",style:{height:"70vh"},children:[Object(a.jsx)("div",{className:"text-center col-md-4",children:Object(a.jsx)("img",{src:N,alt:"Alcantara, Romblon - Municipal Seal",className:"img-thumbnail border-0",style:{height:"15rem",width:"15rem"}})}),Object(a.jsxs)("div",{className:"col-md-8",children:[Object(a.jsx)("p",{className:"h2",children:"Municipality of Alcantara"}),Object(a.jsx)("p",{className:"display-6",children:"Integrated Water Supply System"}),Object(a.jsxs)("p",{className:"text-justify",children:["Our goal is to improve distribution of monthly water bills, while also adding convenience by allowing the account holders to view their bills and account details online.",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),"The monthly distribution of bills will be covered by our system's integrated SMS notification feature. Account holders can view their accounts by logging in to our customer's page."]})]})]}),Object(a.jsxs)("div",{className:"row card-group my-4 py-4",children:[Object(a.jsx)("p",{className:"h2 mb-3 text-center",children:"Main Features"}),i.map((function(e){return Object(a.jsx)(te,{cardImg:e.cardImg,cardTitle:e.cardTitle,cardText:e.cardText,buttonLabel:e.buttonLabel,handleClick:e.handleClick},e.id)}))]})]})})},ne=Object(s.createContext)(null),re=function(e){var t=e.children,c=Object(s.useState)([]),l=Object(u.a)(c,2),n=l[0],r=l[1];return Object(a.jsx)(ne.Provider,{value:{accounts:n,setAccounts:r},children:t})},ie=function(){return Object(s.useContext)(ne)},oe=c(1),de=oe.createContext,be=oe.useContext,je=de(),ue=function(e){var t=e.children;return Object(a.jsx)(je.Provider,{value:[{label:"December 28 - January 28",short:"12/28/19 - 01/28/20",value:{periodFrom:15774624e5,periodTo:15801408e5}},{label:"January 28 - February 28",short:"01/28/20 - 02/28/20",value:{periodFrom:15801408e5,periodTo:15828192e5}},{label:"February 28 - March 28",short:"02/28/20 - 03/28/20",value:{periodFrom:15828192e5,periodTo:15853248e5}},{label:"March 28 - April 28",short:"03/28/20 - 04/28/20",value:{periodFrom:15853248e5,periodTo:15880032e5}},{label:"April 28 - May 28",short:"04/28/20 - 05/28/20",value:{periodFrom:15880032e5,periodTo:15905952e5}},{label:"May 28 - June 28",short:"05/28/20 - 06/28/20",value:{periodFrom:15905952e5,periodTo:15932736e5}},{label:"June 28 - July 28",short:"06/28/20 - 07/28/20",value:{periodFrom:15932736e5,periodTo:15958656e5}},{label:"July 28 - August 28",short:"07/28/20 - 08/28/20",value:{periodFrom:15958656e5,periodTo:1598544e6}},{label:"August 28 - September 28",short:"08/28/20 - 09/28/20",value:{periodFrom:1598544e6,periodTo:16012224e5}},{label:"September 28 - October 28",short:"09/28/20 - 10/28/20",value:{periodFrom:16012224e5,periodTo:16038144e5}},{label:"October 28 - November 28",short:"10/28/20 - 11/28/20",value:{periodFrom:16038144e5,periodTo:16064928e5}},{label:"November 28 - December 28",short:"11/28/20 - 12/28/20",value:{periodFrom:16064928e5,periodTo:16090848e5}}],children:t})},me=function(){return be(je)},he=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Oe=["January","February","March","April","May","June","July","August","September","October","November","December"],xe=function(){var e=Object(s.useState)(null),t=Object(u.a)(e,2),c=t[0],a=t[1],l=Object(s.useRef)(null);return Object(s.useEffect)((function(){l.current=new Date})),Object(s.useEffect)((function(){var e=he[l.current.getDay()],t=Oe[l.current.getMonth()],c=l.current.getDate(),s=l.current.getFullYear();a("".concat(e,", ").concat(t," ").concat(c,", ").concat(s))}),[]),c},pe=(c(42),function(){var e=Object(s.useState)(!0),t=Object(u.a)(e,2),c=t[0],l=t[1],n=Object(s.useState)(!0),r=Object(u.a)(n,2),i=r[0],o=r[1],d=Object(s.useRef)(null);Object(s.useEffect)((function(){return i?d.current=setTimeout((function(){o(c)}),800):o(c),function(){return clearTimeout(d.current)}}),[c,i]);var b=xe();return Object(a.jsxs)("div",{className:"col-md-12 mr-auto py-2",children:[Object(a.jsxs)("div",{className:"row bg-light align-items-center",children:[Object(a.jsx)("button",{className:"".concat(c&&"active"," btn btn-outline-primary btn-lg btn-important-notes col-6 mb-2 text-left"),type:"button",onClick:function(){return l(!c)},children:Object(a.jsx)("span",{className:"font-xl btn-important-notes",children:c?"Hide Reminders":"Show Reminders"})}),Object(a.jsx)("div",{className:"font-3xl col-6 text-right ",children:Object(a.jsxs)("span",{children:[" ",b," "]})})]}),i&&Object(a.jsx)("div",{className:"".concat(c?"notes-in":"notes-out"," col-11"),children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"Only unbilled accounts for the selected statement period will be shown in the list."}),Object(a.jsx)("li",{children:"The available options for the statement period depends on current date."}),Object(a.jsx)("li",{children:"Statements can only be issued"}),Object(a.jsx)("li",{children:"Begin by clicking the Hide Notes button."})]})})]})}),Ne=(c(43),function(e){var t=e.payload,c=e.account,s=e.isLoading,l=e.setIsLoading,n=e.errors,r=e.setErrors,i=e.setShowModal,o=localStorage.getItem("token"),d=ie(),b=d.accounts,j=d.setAccounts;return Object(a.jsx)("button",{type:"button",className:"btn btn-success col-3",onMouseDown:function(){r(function(e,t){var c={};return e.accountNumber||(c.accountNumber="Account number is required for issuing."),e.periodFrom||(c.periodFrom="You must select the period covered for this statement."),"number"!==typeof e.periodFrom&&(c.periodFrom="A valid statement period must be selected."),e.periodTo||(c.periodTo="You must select the period covered for this statement."),"number"!==typeof e.periodTo&&(c.periodTo="A valid statement period must be selected."),e.readingPresent||(c.readingPresent="Present Meter Reading is required. Please try again."),e.readingPresent<t.lastBillReading&&(c.readingPresent="Present Meter Reading should not be less than previous reading."),c}(t,c))},onMouseUp:function(){if(l(!0),Object.keys(n).length>0)return l(!1),!1;fetch("https://sp1-blue-sparrow.herokuapp.com/api/v1/bill-management/bills/issue",{method:"POST",headers:{"Content-type":"application/json","x-auth-token":o},body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){"FIRST"!==e&&"SUCCEEDING"!==e||(l(!1),j(b.filter((function(e){return e.accountNumber!==t.accountNumber}))),alert("Statement was successfully issued. Click Ok to continue."),i(!1))})).catch((function(e){console.log(e),alert("Oops.. Something went wrong..."),l(!1)}))},disabled:s,children:s?Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),Object(a.jsx)("span",{className:"visually-hidden",children:"Loading..."})]}):Object(a.jsx)("span",{children:"Submit New Statement"})})}),fe=function(e){var t=e.payload,c=e.setPayload,l=e.setShowModal,n=ie().accounts.find((function(e){return e.accountNumber===t.accountNumber})),r=me().find((function(e){return e.value.periodTo===t.periodTo})),i=T({consumption:t.readingPresent-((null===n||void 0===n?void 0:n.lastBillReading)||0)}),o=Object(s.useState)(!1),b=Object(u.a)(o,2),j=b[0],m=b[1];function h(){c(Object(d.a)(Object(d.a)({},t),{},{accountNumber:"",readingPresent:0,chargeOthers:0})),l(!1)}var O=Object(s.useState)(!1),x=Object(u.a)(O,2),p=x[0],N=x[1],f=Object(s.useState)({}),v=Object(u.a)(f,2),g=v[0],y=v[1];return Object(a.jsx)("div",{className:"new-bill-modal",children:Object(a.jsx)("div",{className:"modal-dialog modal-xl",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header d-flex flex-column",children:[Object(a.jsx)("button",{type:"button",className:"btn-close",onClick:h,"aria-label":"Close",disabled:p}),Object(a.jsxs)("div",{className:"row align-items-center justify-content-around w-100",children:[Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center ",children:"Account No."}),Object(a.jsx)("p",{className:"m-0 p-0 text-center font-weight-bold font-l",children:(null===n||void 0===n?void 0:n.accountNumber)||"-"})]}),Object(a.jsx)("p",{className:"font-3xl m-0 p-0 text-center col-md-4",children:"Statement of Account"}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center ",children:"Period Covered"}),Object(a.jsx)("p",{className:"m-0 p-0 text-center font-weight-bold font-l",children:r.short||"-"})]})]})]}),Object(a.jsx)("div",{className:"modal-body",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"row bg-paper py-2 my-1",children:[Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center mb-1",children:"Name"}),Object(a.jsx)("p",{className:"m-0 p-0 text-center font-l",children:(null===n||void 0===n?void 0:n.fullName)||"-"})]}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center mb-1",children:"Address"}),Object(a.jsx)("p",{className:"m-0 p-0 text-center font-l",children:(null===n||void 0===n?void 0:n.address)||"-"})]}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center mb-1",children:"Meter Serial No."}),Object(a.jsx)("p",{className:"m-0 p-0 text-center font-l",children:(null===n||void 0===n?void 0:n.meterSerialNumber)||"-"})]})]}),Object(a.jsxs)("div",{className:"row bg-paper py-2 my-1 meter-reading-section",children:[Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)("p",{className:"m-0 p-0 text-center font-xl font-weight-bold",children:"Meter Reading"})}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center ",children:"Previous"}),Object(a.jsx)("div",{className:"d-flex flex-column justify-content-center ",children:Object(a.jsx)("p",{className:"m-0 p-0 text-center font-l",children:"".concat((null===n||void 0===n?void 0:n.lastBillReading)||"0"," Cu. M")})})]}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center ",children:"Present"}),Object(a.jsxs)("div",{className:"row align-items-center justify-content-center ",children:[Object(a.jsx)("div",{className:"col-3 mr-1",children:Object(a.jsx)("div",{className:"row align-items-center",children:Object(a.jsx)("input",{type:"number",id:"readingPresent",className:"form-control form-control-sm text-right","aria-describedby":"readingPresent",value:t.readingPresent||"",onChange:function(e){e.target.value.length<=4&&e.target.value>=0?c(Object(d.a)(Object(d.a)({},t),{},{readingPresent:parseInt(e.target.value)})):e.target.value.trim()},disabled:p})})}),Object(a.jsx)("p",{className:"m-0 p-0 font-weight-bold font-l col-3 ml-1",children:"Cu. M"})]})]}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center ",children:"Cu. Meters Used"}),Object(a.jsx)("div",{className:"d-flex flex-column justify-content-center ",children:Object(a.jsx)("p",{className:"m-0 p-0 text-center font-l",children:"".concat(t.readingPresent-(null===n||void 0===n?void 0:n.lastBillReading)>0?t.readingPresent-(null===n||void 0===n?void 0:n.lastBillReading):"0"," Cu. M")})})]})]}),Object(a.jsxs)("div",{className:"row bg-paper pt-1 mt-1 pb-0 mb-0",children:[Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)("p",{className:"m-0 p-0 my-1 text-center font-xl font-weight-bold",children:"Consumption"})}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center mb-1",children:"Charges"}),Object(a.jsxs)("div",{className:"col-md-10 ml-auto font-l",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-justify",children:"0 to 10 Cu. Meters"}),Object(a.jsx)("p",{className:"m-0 p-0 text-justify",children:"In Excess of 10 Cu. Meters"})]})]}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center mb-1",children:"Rate"}),Object(a.jsxs)("div",{className:"row font-l",children:[Object(a.jsxs)("div",{className:"col-12 d-flex justify-content-center",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-right pr-3 col-6",children:"Php"}),Object(a.jsx)("p",{className:"m-0 p-0 text-left col-6",children:"50.00"})]}),Object(a.jsxs)("div",{className:"col-12 d-flex justify-content-center",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-right pr-3 col-6",children:"Php"}),Object(a.jsx)("p",{className:"m-0 p-0 text-left col-6",children:"11.00 / Cu. M"})]})]})]}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-center mb-1",children:"Amount"}),Object(a.jsxs)("div",{className:"row font-l",children:[Object(a.jsxs)("div",{className:"col-10 d-flex justify-content-center",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-right pr-4 font-weight-bold col-5",children:"Php"}),Object(a.jsx)("p",{className:"m-0 p-0 text-right pl-2 font-weight-bold col-3",children:"50.00"})]}),Object(a.jsxs)("div",{className:"col-10 d-flex justify-content-center",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-right pr-4 font-weight-bold col-5",children:"Php"}),Object(a.jsx)("p",{className:"m-0 p-0 text-right pl-2 font-weight-bold col-3",children:"".concat((new Intl.NumberFormat).format(i.chargeAboveTen),".00")})]})]})]})]}),Object(a.jsxs)("div",{className:"row bg-paper other-charge-class",children:[Object(a.jsx)("div",{className:"col-md-4 font-l",children:Object(a.jsxs)("div",{className:"col-md-10 form-check m-0 p-0 ml-auto",children:[Object(a.jsx)("input",{className:"form-check-input",type:"checkbox",id:"otherChargeCheck",value:j,defaultChecked:j,onChange:function(e){return m(!j)},disabled:p}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"otherChargeCheck",children:"Other Charges"})]})}),Object(a.jsx)("div",{className:"col-md-4 ml-auto",children:Object(a.jsx)("div",{className:"d-flex flex-column justify-content-center ",children:Object(a.jsx)("p",{className:"m-0 p-0 text-center",children:"-"})})}),Object(a.jsx)("div",{className:"col-md-4",children:j?Object(a.jsxs)("div",{className:"row align-items-center justify-content-center",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-right pr-3 font-weight-bold col-2 font-l",children:"Php"}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("div",{className:"row align-items-center",children:Object(a.jsx)("input",{type:"number",id:"chargeOthers",className:"form-control form-control-sm text-right","aria-describedby":"passwordHelpInline",value:t.chargeOthers||0,onChange:function(e){e.target.value.length<=5&&e.target.value>=0?c(Object(d.a)(Object(d.a)({},t),{},{chargeOthers:parseInt(e.target.value)})):e.target.value.trim()},disabled:p})})})]}):Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-10 d-flex justify-content-center font-l",children:[Object(a.jsx)("p",{className:"m-0 p-0 text-right pr-4 col-5",children:"Php"}),Object(a.jsx)("p",{className:"m-0 p-0 text-right pl-2 col-3",children:"0.00"})]})})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("p",{className:"font-xxl m-0 p-0 col-md-4 text-center ml-auto font-weight-bold",children:"Total Amount Due"}),Object(a.jsx)("p",{className:"m-0 p-0 pl-2 font-weight-bold col-md-4 text-center font-xxl",children:"Php ".concat((new Intl.NumberFormat).format(i.total),".00")})]})]})}),Object(a.jsxs)("div",{className:"modal-footer",children:[Object(a.jsx)("p",{className:"col-6 text-center text-danger font-weight-bold",children:Object(a.jsx)("em",{children:g.readingPresent&&"*".concat(g.readingPresent)})}),Object(a.jsx)("button",{type:"button",className:"btn btn-outline-secondary col-2",onClick:h,disabled:p,children:"Close"}),Object(a.jsx)(Ne,{payload:t,account:n,isLoading:p,setIsLoading:N,errors:g,setErrors:y,setShowModal:l})]})]})})})},ve=function(e){var t=e.payload,c=e.setPayload,s=e.monthIndex,l=me();return Object(a.jsxs)("div",{className:"row py-4",children:[Object(a.jsx)("div",{className:"col-md-4 d-flex flex-column justify-content-center",children:Object(a.jsx)("p",{className:"h4",children:"Select Statement Period:"})}),Object(a.jsx)("div",{className:"col-md-8",children:Object(a.jsx)("select",{className:"form-select form-select-lg mb-3 ","aria-label":"period select",defaultChecked:!0,defaultValue:s,onChange:function(e){c(Object(d.a)(Object(d.a)({},t),{},{periodFrom:l[e.target.value].value.periodFrom,periodTo:l[e.target.value].value.periodTo}))},children:l&&l.map((function(e,t){return t>s-1&&Object(a.jsx)("option",{value:t,children:e.label},t)}))})})]})},ge=function(e){var t=e.accounts,c=e.setShowModal,l=e.payload,n=e.setPayload,r=Object(s.useState)(""),i=Object(u.a)(r,2),o=i[0],b=i[1],j=L({data:t,sortBy:o}),m=j.array,h=j.arrow,O={up:Object(a.jsx)(J,{}),down:Object(a.jsx)(V,{})};return Object(a.jsxs)("table",{className:"table table-hover table-striped w-100 align-middle mb-5",children:[Object(a.jsxs)("colgroup",{children:[Object(a.jsx)("col",{style:{width:"25%"}}),Object(a.jsx)("col",{style:{width:"30%"}}),Object(a.jsx)("col",{style:{width:"25%"}}),Object(a.jsx)("col",{style:{width:"20%"}})]}),Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){b("accountNumberAsc"===o?"accountNumberDesc":"accountNumberAsc")},title:"Sort by Account No.",children:[Object(a.jsx)("div",{children:"Account No."}),(null===h||void 0===h?void 0:h.accountNumber)&&O[h.accountNumber]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){b("fullNameAsc"===o?"fullNameDesc":"fullNameAsc")},title:"Sort by Full Name",children:[Object(a.jsx)("div",{children:"Full Name"}),(null===h||void 0===h?void 0:h.fullName)&&O[h.fullName]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0",children:Object(a.jsxs)("div",{style:{cursor:"pointer"},className:"d-flex w-100 justify-content-between align-items-center py-2",onClick:function(){b("barangayAsc"===o?"barangayDesc":"barangayAsc")},title:"Sort by Barangay",children:[Object(a.jsx)("div",{children:"Barangay"}),(null===h||void 0===h?void 0:h.barangay)&&O[h.barangay]]})}),Object(a.jsx)("th",{scope:"col",className:"my-0 py-0"})]})}),Object(a.jsx)("tbody",{children:m&&m.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:e.accountNumber}),Object(a.jsx)("td",{children:e.fullName}),Object(a.jsx)("td",{children:e.address.split(",")[0]}),Object(a.jsx)("td",{className:"d-flex justify-content-center",children:Object(a.jsx)("button",{type:"button",className:"btn btn-sm btn-primary px-2",onClick:function(){n(Object(d.a)(Object(d.a)({},l),{},{accountNumber:e.accountNumber})),c(!0)},children:"Issue Statement"})})]},e.accountNumber)}))})]})},ye=new Date,we=function(){var e=localStorage.getItem("token"),t=P({endpoint:"/account-management/accounts",token:e}).data,c=ie(),l=c.accounts,n=c.setAccounts,r=ye.getMonth()-1,i=me(),o=Object(s.useState)({accountNumber:"",periodFrom:i[r].value.periodFrom,periodTo:i[r].value.periodTo,readingPresent:0,chargeOthers:0}),d=Object(u.a)(o,2),b=d[0],j=d[1],m=Object(s.useState)(!1),h=Object(u.a)(m,2),O=h[0],x=h[1];Object(s.useEffect)((function(){t&&n(t)}),[t,n]);var p=function(e){var t=e.data,c=e.filter,a=Object(s.useState)({filteredArr:Object(E.a)(t)}),l=Object(u.a)(a,2),n=l[0],r=l[1];return Object(s.useEffect)((function(){var e=t.filter((function(e){return e.lastBillPeriodTo<c}));r({filteredArr:e})}),[t,c]),n}({data:l||[],filter:b.periodTo}).filteredArr;return Object(a.jsxs)("div",{className:"container",children:[O&&Object(a.jsx)(fe,{payload:b,setPayload:j,setShowModal:x}),Object(a.jsx)("p",{className:"display-5 text-center py-3",children:"Issue Statements"}),Object(a.jsx)(pe,{}),Object(a.jsx)(ve,{payload:b,setPayload:j,monthIndex:r}),t?Object(a.jsx)(ge,{accounts:p,setShowModal:x,payload:b,setPayload:j}):Object(a.jsx)(k,{})]})},Se=function(){var e=Object(o.g)(),t=Object(o.h)().path,c=xe();return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-md-8 mx-auto",children:[Object(a.jsx)("p",{className:"display-5 text-center py-3 pb-5",children:"Statements"}),Object(a.jsxs)("div",{className:"row g-4",children:[Object(a.jsxs)("div",{style:{fontSize:"1.5rem"},className:"my-3 col-md-10 mr-auto",children:[Object(a.jsx)("span",{children:"Today is "}),Object(a.jsxs)("span",{children:[" ",c&&c," "]})]}),Object(a.jsxs)("div",{className:"my-2",children:["Reminders:",Object(a.jsxs)("ul",{className:"mt-2",children:[Object(a.jsx)("li",{children:"After submitting the new statement, an SMS message will be sent to the mobile number of the account holder to inform them of their new bill."}),Object(a.jsx)("li",{children:"Do not forget to verify all the details before issuing a new statement."}),Object(a.jsx)("li",{children:"To begin, press the Issue New Statements button below."})]})]})]}),Object(a.jsx)("div",{className:"col py-2",children:Object(a.jsx)("button",{className:"btn btn-lg btn-outline-primary col-md-6",type:"button",onClick:function(){e.push("".concat(t,"/issue"))},children:"Issue New Statements"})})]})})})},Ae=function(){var e=Object(o.h)().path;return Object(a.jsx)(re,{children:Object(a.jsx)(ue,{children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:e,children:Object(a.jsx)(Se,{})}),Object(a.jsx)(o.b,{path:"".concat(e,"/issue"),children:Object(a.jsx)(we,{})})]})})})},Ce=function(){var e=localStorage.getItem("role"),t=Object(s.useState)(!1),c=Object(u.a)(t,2),l=c[0],n=c[1];return Object(s.useEffect)((function(){n("admin"===e)}),[e]),Object(a.jsxs)("div",{className:"h-100 pt-5 my-3",children:[Object(a.jsx)(v,{}),l?Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:"/admin",children:Object(a.jsx)(le,{})}),Object(a.jsx)(o.b,{path:"/admin/accounts",children:Object(a.jsx)(ee,{})}),Object(a.jsx)(o.b,{path:"/admin/statements",children:Object(a.jsx)(Ae,{})})]}):Object(a.jsx)(y,{children:Object(a.jsx)(S,{children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:"/customer",children:Object(a.jsx)(I,{})}),Object(a.jsx)(o.b,{path:"/customer/bills",children:Object(a.jsx)(M,{})})]})})})]})},ke=function(e){var t=e.children,c=Object(b.a)(e,["children"]),l=Object(o.g)(),n=localStorage.getItem("role");return console.log(n),Object(s.useEffect)((function(){switch(n){case"admin":l.push("/admin");break;case"customer":l.push("/customer");break;default:l.push("/login")}}),[n,l]),Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,Object(d.a)(Object(d.a)({},c),{},{path:"/admin",render:function(e){return t}})),Object(a.jsx)(o.b,Object(d.a)(Object(d.a)({},c),{},{path:"/customer",render:function(e){return t}}))]})};var Pe=function(){return Object(a.jsx)(i.a,{basename:"",children:Object(a.jsx)(x,{children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{path:"/login",render:function(){return Object(a.jsx)(f,{})}}),Object(a.jsx)(j,{path:"/",children:Object(a.jsx)(ke,{children:Object(a.jsx)(Ce,{})})})]})})})},Be=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,45)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,l=t.getLCP,n=t.getTTFB;c(e),a(e),s(e),l(e),n(e)}))};r.a.render(Object(a.jsx)(l.a.StrictMode,{children:Object(a.jsx)(Pe,{})}),document.getElementById("root")),Be()}},[[44,1,2]]]);
//# sourceMappingURL=main.46347c1a.chunk.js.map